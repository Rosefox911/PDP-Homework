;; The first three lines of this file were inserted by DrRacket. They record metadata
;; about the language level of this file in a form that our tools can easily process.
#reader(lib "htdp-beginner-reader.ss" "lang")((modname inventory) (read-case-sensitive #t) (teachpacks ()) (htdp-settings #(#t constructor repeating-decimal #f #t none #f ())))
(require 2htdp/universe)
(require 2htdp/image)
(require rackunit)
(require rackunit/text-ui)
(require "extras.rkt")


(provide
 
 )
;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;

;; DATA DEFINITIONS

(define-struct book (isbn title author publisher unit-price unit-cost 
                          on-hand reorder volume))
;; A Book is a
;; (make-book Integer String String String Integer Integer 
;;                    Integer MaybeNumber MaybeNumber Integer)
;; INTERPRETATION:
;; isbn is an integer that represents a unique identifier for this book
;;  also known as the "international standard book number"
;; title is a string that represents the title of the book
;; author is a string that represents the author of the book
;; publisher is a string that represents 
;;  the publisher that published the book
;; unit-price is an integer that represents the price 
;;  at which the book is sold to customers in USD
;; unit-cost is an integer that represents the price 
;;  at which the book is sold to the bookstore in USD
;; on-hand is an integer that represents the number of books
;;  currently in stock.
;; reorder is a seperate structure that holds the 
;;  reorder status for a book. It determines whether there is a delivery
;;  pending for this book and how many copies are suppose to come.
;;  otherwise, the days-left-delivery field within reorder 
;;  is set to false.
;; volume represents the amount of units for this item, in cubic feet.

;; book-fn : Book -> ??
(define (book-fn b)
  (...
   (book-isbn b)
   (book-title b)
   (book-author b)
   (book-publisher b)
   (book-unit-price b)
   (book-unit-cost b)
   (book-on-hand b)
   (book-reorder b)
   (book-volume b)))

(define-struct reorder (days-left-delivery copies-in-delivery))
;; A ReOrder is a (make-reorder MaybeInteger MaybeInteger)
;; days-left-delivery represents the number of says left till the 
;; delivery arrives
;; copies-in-delivery represents the number of copies of this 
;; specific book expected to arrive once the delivery gets here.


;; reorder-fn : ReOrderBook -> ??

(define (reorder-fn reor)
  (...
   (reorder-days-left-delivery reor)
   (reorder-copies-in-delivery reor)))


;; A ReOrderStatus is one of:
;; ReOrder (interp: there is a shipment pending arrival)
;; false (interp: there is no shipment pending arrival)

;; reorder-status-fn : ReOrderStatus -> ??
(define (reorder-status-fn reors)
  (cond
    [(reorder? reors) ...]
    [(false? reors) ...]))


(define-struct line-item (isbn quantity))
;; A LineItem is a (make-line-item Integer Integer)
;; isbn is an integer that represents a unique identifier for this book
;;  also known as the "international standard book number"
;; quantity is an integer that represents the number of books ordered.


;; line-item-fn : LineItem -> ??
(define (line-item-fn li)
  (...
   (line-item-isbn li)
   (line-item-quantity li)))

;; A MaybeInteger is one of:
;; -- Integer (interp: an integer representing an amount)
;; -- false (interp: determining whether it is false or not)

;; maybeinteger-fn : MaybeInteger -> ??
(define (maybeinteger-fn mayi)
  (cond
    [(integer? mayi) ...]
    [(false? mayi) ...]))

;; A MaybeNumber is one of:
;; -- Number (interp: a number representing an amount)
;; -- false (interp: determining whether it is false or not) 

(define (maybenumber-fn mayn)
  (cond
    [(number? mayn) ...]
    [(false? mayn) ...]))

;; An Inventory is a ListOfBook
;; A ListOfBook (LOB) is either
;; -- empty (interp: no books in the list)
;; -- (cons Book LOB) (interp: books in the list)

;; lob-fn : LOB -> ??
(define (lob-fn lob)
  (cond
    [(empty? lob) ...]
    [else (...
           (first lob)
           (lob-fn (rest lob)))]))




;; An Order is a ListOfLineItem
;; A ListOfLineItem (LOLI) is either
;; -- empty (interp: no line-items in the order)
;; -- (cons Line-Item ListOfLine-Item) (interp: line-items in the order)

;; loli-fn : LOLI -> ??
(define (loli-fn loli)
  (cond
    [(empty? loli) ...]
    [else (...
           (first loli)
           (loli-fn (rest loli)))]))

;; END OF DATA DEFINITIONS

;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;

;; CONSTANTS



;; END OF CONSTANTS
;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;

;; inventory-potential-profit : Inventory ->  Number
;; GIVEN: an inventory
;; RETURNS: the total profit for all the items in stock (i.e., how much
;; the bookstore would profit if it sold every book in the inventory).
;; EXAMPLES: TODO
;;STRATEGY: STRUCTURAL DECOMPOSITION on inventory : Inventory
     
(define (inventory-potential-profit inventory)
  (cond
    [(empty? inventory) 0]
    [else (+
           (book-unit-price (first inventory))
           (inventory-potential-profit (rest inventory)))]))

;; TESTS 
;; TODO
                                                                  
                                                             
;; inventory-total-volume : Inventory -> Number
;; GIVEN: TODO
;; RETURNS: the total volume needed to store all the books in stock.
;; EXAMPLES: TODO
;; STRATEGY: STRUCTURAL DECOMPOSITION on inventory : Inventory

(define (inventory-total-volume inventory)
  (cond
    [(empty? inventory) 0]
    [else (+
           (book-volume (first inventory))
           (inventory-total-volume (rest inventory)))]))

;; TESTS
;; TODO


;; price-for-line-item : Inventory LineItem -> MaybeNumber
;; GIVEN: an inventory and a line item
;; RETURNS: the price for that line item (the quantity times the unit
;; price for that item).  Returns false if that isbn does not exist in
;; the inventory. 
;; EXAMPLES: TODO
;; STRATEGY: STRUCTURAL DECOMPOSITION on lineitem : LineItem

(define (price-for-line-item inventory lineitem)
   (price-for-line-item-helper (line-item-isbn lineitem) (line-item-quantity lineitem) inventory))

;; TESTS
;; TODO


;; price-for-line-item-helper : Integer Integer Inventory -> MaybeNumber
;; GIVEN: TODO
;; RETURNS: TODO
;; EXAMPLES: TODO
;; STRATEGY: STRUCTURAL DECOMPOSITON on inventory : Inventory

(define (price-for-line-item-helper isbn quantity inventory)
  (cond
    [(empty? inventory) false]
    [else (if 
           (= isbn (book-isbn (first inventory))) 
           (* quantity (book-unit-price (first inventory))) 
           (price-for-line-item-helper isbn quantity inventory))]))

;; TESTS
;; TODO


;; fillable-now? : Order Inventory -> Boolean.
;; GIVEN: an order and an inventory
;; RETURNS: true iff there are enough copies of each book on hand to fill
;; the order.  If the order contains a book that is not in the inventory,
;; then the order is not fillable.
;; EXAMPLES: TODO
;; STRATEGY: TODO

;; TESTS
;; TODO


;; days-til-fillable : Order Inventory -> MaybeInteger
;; GIVEN: an order and an inventory
;; RETURNS: the number of days until the order is fillable, assuming all
;; the shipments come in on time.  Returns false if there won't be enough
;; copies of some book, even after the next shipment of that book comes
;; in.
;; EXAMPLES: if the order contains one book that is out of stock, with a
;; reorder status showing 2 days until delivery, then the order is
;; refillable in 2 days.  If the order is for 10 copies of the book, and
;; the next order consists of only 5 books, then should return false.
;; STRATEGY: TODO

;; TESTS
;; TODO


;; price-for-order : Inventory Order -> Number
;; GIVEN: TODO
;; RETURNS: the total price for the given order.  The price does not
;; depend on whether any particular line item is in stock.  Line items
;; for an ISBN that is not in the inventory count as 0.
;; EXAMPLES: TODO
;; STRATEGY: TODO

;; TESTS
;; TODO


;; inventory-after-order : Inventory Order -> Inventory.
;; GIVEN: an order
;; WHERE: the order is fillable now
;; RETURNS: the inventory after the order has been filled.
;; EXAMPLES: TODO
;; STRATEGY: TODO


;; TESTS
;; TODO


;; increase-prices : Inventory String Number -> Inventory
;; GIVEN: an inventory, a publisher, and a percentage,
;; RETURNS: an inventory like the original, except that all items by that
;; publisher have their unit prices increased by the specified
;; percentage.
;; EXAMPLE: (increase-prices inventory1 "MIT Press" 10)
;; returns an inventory like the original, except that all MIT Press
;; books in the inventory have had their prices increased by 10%.
;; STRATEGY: TODO

;; TESTS
;; TODO


;; reorder-present? : ReorderStatus -> Boolean
;; GIVEN: TODO
;; RETURNS: true iff the given ReorderStatus shows a pending re-order.
;; EXAMPLES: TODO
;; STRATEGY: STRUCTURAL DECOMPOSITION on reorderstatus : ReOrderStatus


(define (reorder-present? reorderstatus)
  (cond
    [(reorder? reorderstatus) true]
    [(false? reorderstatus) false]))


;; TESTS
;; TODO

;; make-empty-reorder : Any -> ReorderStatus
;; GIVEN: TODO
;; RETURNS: a ReorderStatus showing no pending re-order. 
;; EXAMPLES: TODO
;; STRATEGY: TODO
;; NOTE: STRUCTURAL DECOMPOSITION on reorderstatus : ReOrderStatus

(define (make-empty-reorder any)
  (make-reorder false false))

;; TESTS
;; TODO